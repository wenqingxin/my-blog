---
title: http协议
date: 2018-03-03 10:10:20
tags:
---
## 一、http的主要特点
1. 简单快速
可以通过uri快速方式资源
2. 灵活
可以通过http获取各种类型的数据
3. 无连接
一个请求，就会建立一次连接，服务端响应后，就断开链接
4. 无状态
请求没有上下文，一次请求和响应后，下次请求，服务端并不能识别客户端的身份
<!-- more -->
## 二、http报文的组成
### 请求报文
1. 请求行： 请求方式、请求地址、协议版本
2. 请求头：host、cookie、connection、user-agent等
3. 空行：表示请求头结束，请求体开始
4. 请求体：请求的数据
### 响应报文
1. 响应行：状态码、协议版本
2. 响应头：server、date、content-type等
3. 空行：表示响应头结束，响应体开始
4. 响应体：相应的数据
响应报文

## 三、http的方法
1. get
2. post
3. put
4. delete
5. head

### get、post的区别
1. get请求的数据长度有限制，一般是2kb，而post没有限制
2. get只能用ascII字符，post没有限制
3. get回退是无害的，而post回退会再次提交
4. get请求在被记录到浏览器的历史记录中，post请求不会
5. get参数在url里，而post参数在request body里

## 四、http状态码
### 请求的类别
1xx 服务器已经接收到请求，正在处理当中
2xx 服务器已经成功接收请求
3xx 重定向，要完成请求必须再进一步的操作
4xx 客户端错误 客户端请求有语法错误
5xx 服务端错误 服务端未能实现合法的请求
### 常用的状态码
200 客户端请求成果
206 Partial Content，客户端发送的一个请求头带range的get请求，描述数据的范围，比如多少字节到多少字节，服务器端返回这个范围的数据，常用的场景就是视频播放。
301 Moved parmanently永久重定向
302 Not Fund 临时重定向
304 Not modified 如果一个资源在返回时响应头里带有Last-Modified时间，下次再次访问这个资源的时候请求头里面就会带上If-Modified-Since时间，服务器确认这个时间的资源是否过期，如果没过期就会返回304，客户端直接用缓存的资源。
400 Bad Request 客户端语法错误，服务器无法理解
401 Unathorized 请求未经授权
403 Forbidden 请求的资源禁止访问
404 Not Found 未找到资源
500 Internal server error 服务器起内部错误
502 Server Unavailable 服务器暂时不能访问

## 五、持久连接
普通模式下，http采用请求-应答的模式，每个请求都会建立一个连接，当应答完成后，就会断开连接。
http1.1默认采用持久连接，在请求头里添加吃Connection:keep-alive.发起请求建立连接后，不马上断开连接，后续的请求就直接利用这个连接发送和接收数据，在达到一定的时间后才断开连接，达到节约网络资源的目的。

## 六、管线化
常规的http请求就是发起请求返回响应，而管线化是将几个请求打包后，一次性发送给服务器，服务器再把这几次请求的响应打包一次性返回回来。
特点：
1. 开启持久连接
2. get、head以及post有所限制
3. 初次创建连接时，不要使用管线化，对方可能不支持