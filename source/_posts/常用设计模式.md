---
layout: posts
title: jså¸¸ç”¨è®¾è®¡æ¨¡å¼
date: 2018-02-23 11:14:42
tags:
---
è®¾è®¡æ¨¡å¼æ˜¯ä¸€å¥—åå¤å®è·µã€å¤šæ•°äººçŸ¥æ™“çš„ã€è¢«äººä»¬åˆ†ç±»å‡ºæ¥çš„è®¾è®¡ç»éªŒæ€»ç»“ï¼Œæˆ‘ä»¬ä½¿ç”¨è®¾è®¡æ¨¡å¼æ˜¯ä¸ºäº†ä»£ç çš„å¤ç”¨æ€§ï¼Œæ›´å®¹æ˜“è¢«ä»–äººç†è§£ï¼Œæé«˜ä»£ç çš„å¯é æ€§ã€‚ä¸‹é¢ä»‹ç»å¸¸ç”¨çš„9ç§è®¾è®¡æ¨¡å¼ã€‚
## ä¸€ã€å•ä¾‹æ¨¡å¼
ä¸€ä¸ªç±»æ–¹æ³•å§‹ç»ˆåªæä¾›å•ä¸ªå®ä¾‹ï¼ŒèŠ‚çº¦å†…å­˜ã€‚ä¸‹é¢ä»£ç åªä¼šåˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼š
```javascript
function Foo() {
}
Foo.getInstance = function () {
    if (!Foo._instance) {
        Foo._instance = new Foo();
    }
    return Foo._instance;
}
var foo1 = Foo.getInstance();
var foo2 = Foo.getInstance();
console.log(foo1 === foo2);// true
```
<!-- more -->

## äºŒã€å·¥å‚æ¨¡å¼
åˆ©ç”¨å…±ç”¨çš„æ¥å£æ–¹æ³•å®ç°ä¸åŒå®ä¾‹çš„åˆ›å»ºï¼Œè½¬ç§»åˆ›å»ºå®ä¾‹ç±»çš„ä¾èµ–æ€§åˆ°å·¥å‚ç±»ä¸­ï¼Œç»Ÿä¸€äº†å®ä¾‹åˆ›å»ºçš„èŒè´£ã€‚
ä¸¾ä¸ªæ —å­ğŸŒ°
```javascript
function Foo() {
    this.name = "I'm foo";
}
function Bar() {
    this.name = "I'm bar.";
}
// å·¥å‚ç±»
function Factory() {
}
// å·¥å‚æ–¹æ³•
Factory.prototype.create = function (name) {
    if (name === 'Foo') {
        return new Foo();
    }else if (name === 'Bar') {
        return new Bar();
    }
    return {};
}
var factory = new Factory();
var foo = factory.create('Foo');
var bar = factory.create('Bar');
console.log(foo.name);
console.log(bar.name);
```
## ä¸‰ã€å¤–è§‚æ¨¡å¼
éµå®ˆå¼€é—­åŸåˆ™ï¼Œå®šä¹‰ä¸€ä¸ªé«˜å±‚æ¥å£ï¼Œå¯¹æŸäº›é€»è¾‘æ–¹æ³•è¿›è¡ŒåŒ…è£…ï¼Œä½¿ä¹‹å¯¹å¤–ä¸é€æ˜ï¼Œåªæä¾›æ¥å£å¤–éƒ¨éœ€è¦çš„æ–¹æ³•ï¼Œæ–¹ä¾¿è°ƒç”¨ã€‚
ä¸¾ä¸ªä¾‹å­
```javascript
function loadData(){
    console.log('åŠ è½½æ•°æ®');
}
function removeOldData(){
    console.log('æ¸…é™¤æ—§æ•°æ®');
}
function updateNewData(){
    console.log('æ›´æ–°æ•°æ®åˆ°ç•Œé¢');
}
function showDialog(){
    console.log('æ˜¾ç¤ºå¼¹æ¡†');
}
// æ˜¾ç¤º
function show() {
    loadData();
    removeOldData();
    updateNewData();
    showDialog();
}
// showæ–¹æ³•é‡Œå°è£…äº†ä¸Šé¢å‡ ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬ä»åŠ è½½æ•°æ®åˆ°å¼¹æ¡†æ˜¾ç¤ºåªéœ€è¦è°ƒç”¨ä¸€æ¬¡showæ–¹æ³•ã€‚
show();
```
## å››ã€é€‚é…å™¨æ¨¡å¼
å¯¹æŸäº›ä¸æ”¯æŒçš„åŠŸèƒ½è¿›è¡Œé€‚é…ï¼Œåœ¨åŸæœ‰çš„åŠŸèƒ½åŠ ä¸Šæ–°çš„åŠŸèƒ½é€»è¾‘è€ŒåŸæœ‰çš„åŠŸèƒ½ä¸å—å½±å“ã€‚
ä¸¾ä¾‹
```javascript
function adapter(cls, method) {
    return cls.prototype[method];
}
function Page(type) {
    if(type === 'mobile') {
        this.display = adapter(MobilePage,'display');
    }
}
Page.prototype.display = function () {
    console.log('æˆ‘æ˜¯PCé¡µé¢');
}
function MobilePage() {
}
MobilePage.prototype.display = function () {
    console.log('æˆ‘æ˜¯mobileé¡µé¢');
}
var pcPage = new Page();
pcPage.display();// æˆ‘æ˜¯PCé¡µé¢
var mPage = new Page('mobile');
mPage.display();// æˆ‘æ˜¯mobileé¡µé¢
```
## äº”ã€ç­–ç•¥æ¨¡å¼
æŠŠæ“ä½œå°è£…æˆä¸€ä¸ªä¸ªçš„ç­–ç•¥ï¼Œåœ¨æ‰§è¡ŒæŸæ®µé€»è¾‘æ—¶ï¼Œæ ¹æ®ä¼ é€’å‚æ•°çš„ä¸é€šï¼Œæ‰§è¡Œä¸é€šçš„ç­–ç•¥ã€‚
ä¸¾ä¾‹
```javascript
function StrategyOne() {}
StrategyOne.prototype.do = function () {
    console.log('do ç­–ç•¥1');
}
function StrategyTwo() {}
StrategyTwo.prototype.do = function () {
    console.log('do ç­–ç•¥2');
}
function doStrategy(strategy) {
    strategy && strategy.do();
}
var strategyOne = new StrategyOne();
var strategyTwo = new StrategyTwo();
doStrategy(strategyOne);// do ç­–ç•¥1
doStrategy(strategyTwo);// do ç­–ç•¥2
```
## å…­ã€è§‚å¯Ÿè€…æ¨¡å¼
è¢«è§‚å¯Ÿè€…ä¾èµ–æ‰€æœ‰çš„è§‚å¯Ÿè€…å¯¹è±¡ï¼Œå½“å‘å‡ºé€šçŸ¥æ—¶ï¼Œæ‰€æœ‰è§‚å¯Ÿè€…éƒ½èƒ½å¤Ÿæ”¶åˆ°æ¶ˆæ¯ã€‚
```javascript
function Foo() {}
// æ³¨å†Œè§‚å¯Ÿè€…
Foo.prototype.bind = function(event, fn) {
    Foo.listners = Foo.listners || {};
    Foo.listners[event] =  Foo.listners[event] || [];
    Foo.listners[event].push(fn);
}
// è¢«è§‚å¯Ÿè€…è§¦å‘äº‹ä»¶
Foo.prototype.fire = function (event) {
    if (!Foo.listners || !Foo.listners[event]) {
        return;
    }
    for(var i=0; i<Foo.listners[event].length; i++) {
        Foo.listners[event][i]();
    }
}
var foo = new Foo();
foo.bind('say', function () {
    console.log('hello!');
})
foo.bind('say', function () {
    console.log('hi!');
})
foo.fire('say');// hello! hi!
```
## ä¸ƒã€è£…é¥°æ¨¡å¼
å¯¹å·²æœ‰çš„åŠŸèƒ½ï¼Œå†æ·»åŠ ä¸€äº›æ–°çš„åŒ…è£…é€»è¾‘ï¼Œä»¥å®ç°åŠŸèƒ½çš„æ‹“å±•ã€‚
```javascript
function Money(num) {
    this.money = num;
}
Money.prototype.get = function () {
    return this.money;
}

function Currency(money) {
    this.cny = "Â¥" + money;
}
Currency.prototype.get = function () {
    return this.cny;
}
// ç»™æ•°å­—åŠ ä¸Šé‡‘é’±ç¬¦å·
var money = new Money(110);
var cny = new Currency(money.get());
console.log(cny.get());// Â¥110
```
## å…«ã€ç»„åˆæ¨¡å¼
æ˜¯åŠŸèƒ½å®ç°æ¨¡å—åŒ–çš„é€»è¾‘ï¼Œå°†æ¨¡å—ç»„åˆèµ·æ¥ä»¥å®ç°æ•´ä½“çš„åŠŸèƒ½ã€‚æ¯”å¦‚è¯´æ ‘å½¢ç»“æ„å›¾ã€‚
```javascript
// äºŒå‰æ ‘èŠ‚ç‚¹
function Node(key,left,right) {
    this.key = key;
    this.left = left;
    this.right = right;
}
var leftChild = new Node(1, null, null);// å·¦å­©å­
var rightChild = new Node(3, null, null);// å³å­©å­
var root = new Node(2, leftChild, rightChild);// ç»„åˆåˆ°æ ¹èŠ‚ç‚¹
console.log(root);
```
## ä¹ã€å¤‡å¿˜å½•æ¨¡å¼
åœ¨åŸæœ‰çš„é€»è¾‘ä¸­ï¼ŒåŠ å…¥è®°å½•çŠ¶æ€çš„æ–¹æ³•ï¼Œå°†é€»è¾‘çš„çŠ¶æ€è½¬ç§»åˆ°å¤–éƒ¨å¹¶ä¿å­˜ã€‚
```javascript
// å¤‡å¿˜å‘èµ·è€…
function Originator () {
    this.state = '';
    this.memento = new Memento();
}
Originator.prototype.setState = function (state) {
    this.state = state;
}
Originator.prototype.getState = function (state) {
    return this.state;
}
Originator.prototype.createMemento = function () {
     this.memento.save(this.state);
}
Originator.prototype.restoreMemento = function () {
     this.setState(this.memento.read());
}
// å¤‡å¿˜å½•
function Memento() {
    this.mementoes = [];
}
Memento.prototype.save = function (memento) {
    this.mementoes.push(memento);
}
Memento.prototype.read = function () {
    return this.mementoes.pop();
}
// æµ‹è¯•ä¸€ä¸‹
var ori = new Originator();
ori.setState(1);
ori.createMemento();
console.log('çŠ¶æ€æ”¹å˜ä¸ºï¼š'+ori.getState());

ori.setState(2);
ori.createMemento();
console.log('çŠ¶æ€æ”¹å˜ä¸ºï¼š'+ori.getState());

ori.setState(3);
console.log('çŠ¶æ€æ”¹å˜ä¸ºï¼š'+ori.getState());

ori.restoreMemento();
console.log('çŠ¶æ€æ¢å¤ä¸ºï¼š'+ori.getState());

ori.restoreMemento();
console.log('çŠ¶æ€æ¢å¤ä¸ºï¼š'+ori.getState());
```
