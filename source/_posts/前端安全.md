---
title: 前端安全
date: 2018-03-10 09:40:24
tags:
---
## 一、前端攻击种类
1. xss 
跨站脚本攻击(cross site scripting)
2. csrf
跨站请求伪造(cross site request forgery)

## 二、xss
### 1.基本原理
通过网站暴露给用户的输入接口，攻击者可以输入一些攻击的脚本，提交到后台后，如果后台直接把该脚本作为数据的一部分返回到前端，脚本就会被浏览器解析执行，从而达到攻击的目的。

### 2.常见攻击场景
攻击者可以在以下场景输入攻击脚本
1. 评论区
2. web在线聊天
<!-- more -->

### 3.常见攻击方法
1. style标签修改样式
攻击者可以写css样式来修改页面，比如这个脚本可以让页面显示不出来
```html
<style>
    body {
        display: none !important;
    }
</style>
```
2. script标签
攻击者可以直接写script标签，然后在里面做想做的事情
```javascript
<script>
alert('xss');
</script>
```
3. 事件
攻击者可以通过事件来触发相应的脚本
```html
<img src="" onerror="alert('xss')"/>
```

### 4.防御方法
1. 编码
通过将攻击者输入的脚本进行html entity编码，已达到不被浏览器解析执行的目的。
以下6个特殊字符需要进行编码
```
&     –>     &amp;
<     –>     &lt;
\>    –>     &gt;
”     –>     &quot;
‘     –>     &#x27;
/     –>     &#x2f;
空格   –>      &nbsp;
```
2. 过滤
对输入脚本的标签事件属性进行过滤，比如onmouseover, onload，onerror事件等。

## 三、xsrf
### 1.基本原理
攻击者盗用用户的合法的身份信息，发送恶意请求。
{% asset_img CSRF.png 攻击原理 %}

### 2.常见攻击场景
用户在A网站登录，A网站返回保存有身份信息的cookie保存在浏览器中；用户又去访问恶意网站B，恶意网站通过引诱用户点击或者在用户不知情的情况下触发某些事件去访问A网站的接口，由于浏览器保存的cookie有用户的合法信息，所以B网站能以用户的身份调用A网站的所有接口，以达到攻击的目的。

### 3.防御方法
1. get请求变成post请求
这种方式用攻击者不能直接以get请求的简单方式发送请求，在一定程度上加大了攻击成本，但攻击者仍然可以构造表单进行提交。
2. referer检测
此种方式通过检测请求头里referer判断访问来源来判断请求来源是否来自可信任的网站。
3. token验证
每次在访问网站接口时需要有网站生成的token作为身份信息以外的附加凭证，验证token通过才能访问。
4. 短信验证
每次在访问网站接口时需要有短信验证码附加凭证，验证通过才能访问。